{"version":3,"file":"js/39.a08aaec3.js","mappings":"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","sources":["webpack://diplomska/./src/views/PerformExercise.vue","webpack://diplomska/./src/views/PerformExercise.vue?f659","webpack://diplomska/./src/PoseRecognition.js"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-xl-2\"></div>\n    <div class=\"col-xl-8\">\n      <!-- Name of exercise and timer -->\n      <div class=\"row mt-2 p-3 fw-bold fs-3\">\n        <div class=\"col-6\">{{ $route.params.exerciseName }}</div>\n        <div class=\"col-6 text-end\"> {{ timerOutput }}</div>\n      </div>\n\n      <!-- Video -->\n      <div class=\"ms-3 me-3 video-box text-center\">\n        <video v-show=\"false\" id=\"video\" class=\"rounded shadow\" autoplay playsinline></video>\n        <canvas v-show=\"true\" id=\"output\" class=\"rounded shadow\"></canvas>\n      </div>\n      <!-- Rep counter -->\n      <div class=\"text-center mt-3\">\n        <span class=\"counter fw-bold\" id=\"counter\">0</span>\n      </div>\n      <!-- Form -->\n      <div class=\"mt-2\" v-show=\"$route.params.exerciseName === 'Deadlift'\">\n        <span class=\"fw-bold fs-3 ms-3\" id=\"status\">Form: ok!</span>\n      </div>\n    </div>\n    <div class=\"col-xl-2\"></div>\n  </div>\n</template>\n\n<script>\nconst PoseRecognition = require('@/PoseRecognition.js')\n\nexport default {\n  name: 'PerformExercise',\n  data() {\n    return {\n      timer: 0,\n      timerOutput: '00:00'\n    }\n  },\n  mounted() {\n    PoseRecognition.setupVideo();\n    PoseRecognition.startPoseDetection(this.$route.params.exerciseName);\n    this.startTimer();\n\n  },\n  beforeUnmount() {\n    PoseRecognition.stopVideo();\n  },\n\n  methods: {\n    startTimer: function () {\n      setInterval(() => {\n        this.timer++;\n        let timer = this.timer;\n        if (timer < 60) {\n          if (timer < 10)\n            timer = '0' + timer;\n          this.timerOutput = '00:' + timer;\n        } else {\n          let minutes = Math.floor(timer / 60);\n          let seconds = timer % 60;\n          if (minutes < 10)\n            minutes = '0' + minutes;\n          if (seconds < 10)\n            seconds = '0' + seconds;\n          this.timerOutput = minutes + ':' + seconds;\n        }\n      }, 1000);\n    },\n\n  },\n\n}\n\n</script>","import { render } from \"./PerformExercise.vue?vue&type=template&id=e78e131c\"\nimport script from \"./PerformExercise.vue?vue&type=script&lang=js\"\nexport * from \"./PerformExercise.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\LoL\\\\Documents\\\\Projekti\\\\diplomska\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","let pose;\r\nlet detector;\r\nlet repCounter;\r\nlet flip;\r\nlet endPoseRecognition;\r\nlet exercise;\r\nlet stance = \"\";\r\n\r\nlet video;\r\nlet canvas;\r\nlet ctx;\r\n\r\nfunction startPoseDetection(exerciseName) {\r\n    console.log(\"exercise:\" + exerciseName);\r\n    pose = null;\r\n    detector = null;\r\n    repCounter = 0;\r\n    flip = true;\r\n    endPoseRecognition = false;\r\n    exercise = exerciseName;\r\n\r\n    const video_temp = document.getElementById('video');\r\n    video_temp.onloadedmetadata = () => {\r\n        video = document.getElementById('video');\r\n        canvas = document.getElementById('output');\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n        ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = 'red';\r\n\r\n        startDetector()\r\n            .then(() => requestAnimationFrame(drawCanvas));\r\n    };\r\n}\r\n\r\nfunction setupVideo() {\r\n    console.log(\"Setting up video...\");\r\n    const video = document.getElementById('video');\r\n    const stream = navigator.mediaDevices.getUserMedia({\r\n        audio: false,\r\n        video: true\r\n    }).then(function (stream) {\r\n        video.srcObject = stream;\r\n    });\r\n    console.log(\"DONE!\");\r\n}\r\n\r\nfunction stopVideo() {\r\n    console.log(\"Stopping video...\");\r\n    video.srcObject.getTracks().forEach(track => track.stop());\r\n    video.srcObject = null;\r\n    endPoseRecognition = true;\r\n    console.log('DONE!');\r\n}\r\n\r\nasync function startDetector() {\r\n    console.log(\"Starting detector...\");\r\n    detector = await poseDetection.createDetector(poseDetection.SupportedModels.MoveNet, { minPoseScore: 0.5 });\r\n    console.log(\"DONE!\");\r\n}\r\n\r\nasync function getPose() {\r\n    pose = await detector.estimatePoses(video);\r\n}\r\n\r\nfunction drawCanvas() {\r\n    if (endPoseRecognition) return;\r\n\r\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n    getPose().then(() => {\r\n\r\n        drawLandmarks();\r\n        connectTheDots();\r\n        switch (exercise) {\r\n            case \"Push up\":\r\n                exercises.printPushup();\r\n                break;\r\n            case \"Deadlift\":\r\n                exercises.printDeadlift();\r\n                exercises.printFormDeadlift();\r\n                break;\r\n            case \"Squat\":\r\n                exercises.printSquat();\r\n                break;\r\n            default:\r\n                console.log(\"Error: exercise not found!\");\r\n                break;\r\n        }\r\n\r\n    }).catch((err) => {\r\n        // console.log(err);\r\n        console.log(\"Cannot detect landmarks!\");\r\n    });\r\n    requestAnimationFrame(drawCanvas);\r\n}\r\n\r\nfunction drawLandmarks() {\r\n    // loop through all landmarks\r\n    for (let i = 0; i < 16; i++) {\r\n        let x = pose[0][\"keypoints\"][i].x;\r\n        let y = pose[0][\"keypoints\"][i].y;\r\n        ctx.beginPath();\r\n        ctx.arc(x, y, 3, 0, 2 * Math.PI);\r\n        ctx.fill();\r\n\r\n    }\r\n}\r\n\r\nfunction connectTheDots() {\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = \"green\";\r\n    ctx.lineWidth = 4;\r\n    // upper body\r\n    ctx.moveTo(pose[0][\"keypoints\"][10].x, pose[0][\"keypoints\"][10].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][8].x, pose[0][\"keypoints\"][8].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][6].x, pose[0][\"keypoints\"][6].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][5].x, pose[0][\"keypoints\"][5].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][7].x, pose[0][\"keypoints\"][7].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][9].x, pose[0][\"keypoints\"][9].y);\r\n    // left side\r\n    ctx.moveTo(pose[0][\"keypoints\"][6].x, pose[0][\"keypoints\"][6].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][12].x, pose[0][\"keypoints\"][12].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][14].x, pose[0][\"keypoints\"][14].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][16].x, pose[0][\"keypoints\"][16].y);\r\n    // right side\r\n    ctx.moveTo(pose[0][\"keypoints\"][5].x, pose[0][\"keypoints\"][5].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][11].x, pose[0][\"keypoints\"][11].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][13].x, pose[0][\"keypoints\"][13].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][15].x, pose[0][\"keypoints\"][15].y);\r\n    // bottom line\r\n    ctx.moveTo(pose[0][\"keypoints\"][12].x, pose[0][\"keypoints\"][12].y);\r\n    ctx.lineTo(pose[0][\"keypoints\"][11].x, pose[0][\"keypoints\"][11].y);\r\n\r\n    ctx.stroke();\r\n}\r\n\r\nconst exercises = {\r\n    printDeadlift: () => {\r\n        let x1 = pose[0][\"keypoints\"][6].x;\r\n        let y1 = pose[0][\"keypoints\"][6].y;\r\n        let x2 = pose[0][\"keypoints\"][12].x;\r\n        let y2 = pose[0][\"keypoints\"][12].y;\r\n        let a = x1 - x2;\r\n        let b = y1 - y2;\r\n        let distanceBetweenTwoPoints = Math.sqrt(a * a + b * b);\r\n        if (distanceBetweenTwoPoints < 50 && !flip) {\r\n            repCounter++;\r\n            updateCounter();\r\n            flip = !flip;\r\n        }\r\n        if (distanceBetweenTwoPoints > 90 && flip) {\r\n            flip = !flip;\r\n        }\r\n        let output = \"deadlifts: \" + repCounter + \" - \" + distanceBetweenTwoPoints + \"px\";\r\n        console.log(\"%c \" + output, \"font-size: 20px\");\r\n    },\r\n    printPushup: () => {\r\n        let x1 = pose[0][\"keypoints\"][5].x;// right arm: 5,7,9  left arm: 10,8,6\r\n        let y1 = pose[0][\"keypoints\"][5].y;\r\n        let x2 = pose[0][\"keypoints\"][7].x;\r\n        let y2 = pose[0][\"keypoints\"][7].y;\r\n        let x3 = pose[0][\"keypoints\"][9].x;\r\n        let y3 = pose[0][\"keypoints\"][9].y;\r\n        let angleInDegrees = calculateAngleBetween3PointsInDegrees(x1, y1, x2, y2, x3, y3);\r\n        if (angleInDegrees > 160 && !flip) {\r\n            repCounter++;\r\n            flip = !flip;\r\n        }\r\n        if (angleInDegrees < 110 && flip) {\r\n            flip = !flip;\r\n        }\r\n        let output = \"Pushups: \" + repCounter + \" - Angle: \" + angleInDegrees + \"*\";\r\n        console.log(\"%c \" + output, \"font-size: 20px\");\r\n    },\r\n    printSquat: () => {\r\n        let x1 = pose[0][\"keypoints\"][16].x;\r\n        let y1 = pose[0][\"keypoints\"][16].y;\r\n        let x2 = pose[0][\"keypoints\"][12].x;\r\n        let y2 = pose[0][\"keypoints\"][12].y;\r\n        let a = x1 - x2;\r\n        let b = y1 - y2;\r\n        let distanceBetweenTwoPoints = Math.sqrt(a * a + b * b);\r\n        if (distanceBetweenTwoPoints < 100 && !flip) {\r\n            repCounter++;\r\n            flip = !flip;\r\n        }\r\n        if (distanceBetweenTwoPoints > 150 && flip) {\r\n            flip = !flip;\r\n        }\r\n        let output = \"Squats: \" + repCounter + \" - \" + distanceBetweenTwoPoints + \"px\";\r\n        console.log(\"%c \" + output, \"font-size: 20px\");\r\n    },\r\n    printFormDeadlift: () => {\r\n        // legs        \r\n        let x1 = pose[0][\"keypoints\"][14].x;\r\n        let y1 = pose[0][\"keypoints\"][14].y;\r\n        let x2 = pose[0][\"keypoints\"][12].x;\r\n        let y2 = pose[0][\"keypoints\"][12].y;\r\n        let x3 = pose[0][\"keypoints\"][11].x;\r\n        let y3 = pose[0][\"keypoints\"][11].y;\r\n        let angleInDegrees = calculateAngleBetween3PointsInDegrees(x1, y1, x2, y2, x3, y3);\r\n        stance = \"OK\";\r\n        if (angleInDegrees > 100) {\r\n            stance = \"legs too wide!\"\r\n        }\r\n        if (angleInDegrees < 90) {\r\n            stance = \"legs too narrow!\"\r\n        }\r\n\r\n        // upper back height\r\n        let leftShoulderHeight = pose[0][\"keypoints\"][5].y;\r\n        let leftHipHeight = pose[0][\"keypoints\"][11].y;\r\n        let rightShoulderHeight = pose[0][\"keypoints\"][6].y;\r\n        let rightHipHeight = pose[0][\"keypoints\"][12].y;\r\n\r\n        let heightOfUpperBackStatus = \"OK\";\r\n        if (leftShoulderHeight > leftHipHeight || rightShoulderHeight > rightHipHeight) { // its >, because of the coordinate system\r\n            heightOfUpperBackStatus = \"Upper back too low!\";\r\n        }\r\n        updateForm(stance);\r\n        let output = \"Stance: \" + stance + \" - Upper back: \" + heightOfUpperBackStatus + \" - Angle: \" + angleInDegrees + \"*\";\r\n        // console.log(\"%c \" + output, \"font-size: 20px\");\r\n    }\r\n}\r\n\r\nfunction calculateAngleBetween3PointsInDegrees(x1, y1, x2, y2, x3, y3) {\r\n    let AB = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\r\n    let BC = Math.sqrt(Math.pow(x2 - x3, 2) + Math.pow(y2 - y3, 2));\r\n    let AC = Math.sqrt(Math.pow(x3 - x1, 2) + Math.pow(y3 - y1, 2));\r\n    return (Math.acos((BC * BC + AB * AB - AC * AC) / (2 * BC * AB)) * 180) / Math.PI;\r\n}\r\n\r\nfunction updateCounter() {\r\n    document.getElementById(\"counter\").innerHTML = repCounter;\r\n}\r\nfunction updateForm(message) {\r\n    document.getElementById(\"status\").innerHTML = \"Form: \" + message;\r\n}\r\n\r\nexport { setupVideo, stopVideo, startPoseDetection, repCounter };"],"names":["class","id","autoplay","playsinline","$route","params","exerciseName","timerOutput","PoseRecognition","name","data","timer","mounted","setupVideo","startPoseDetection","this","startTimer","beforeUnmount","stopVideo","methods","setInterval","minutes","Math","floor","seconds","__exports__","render","pose","detector","repCounter","flip","endPoseRecognition","exercise","video","canvas","ctx","stance","console","log","video_temp","document","getElementById","onloadedmetadata","width","videoWidth","height","videoHeight","getContext","fillStyle","startDetector","then","requestAnimationFrame","drawCanvas","navigator","mediaDevices","getUserMedia","audio","stream","srcObject","getTracks","forEach","track","stop","async","poseDetection","createDetector","SupportedModels","MoveNet","minPoseScore","getPose","estimatePoses","drawImage","drawLandmarks","connectTheDots","exercises","printPushup","printDeadlift","printFormDeadlift","printSquat","catch","err","i","x","y","beginPath","arc","PI","fill","strokeStyle","lineWidth","moveTo","lineTo","stroke","x1","y1","x2","y2","a","b","distanceBetweenTwoPoints","sqrt","updateCounter","output","x3","y3","angleInDegrees","calculateAngleBetween3PointsInDegrees","leftShoulderHeight","leftHipHeight","rightShoulderHeight","rightHipHeight","heightOfUpperBackStatus","updateForm","AB","pow","BC","AC","acos","innerHTML","message"],"sourceRoot":""}